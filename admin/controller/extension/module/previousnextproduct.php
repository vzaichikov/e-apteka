<?
	
	class ControllerExtensionModulePreviousnextproduct extends Controller{private$version='';private$modulePath='';private$moduleName='';private$moduleModel='';public function __construct($register){parent::__construct($register);$this->load->config('isenselabs/previousnextproduct');$this->version=$this->config->get('previousnextproduct_version');$this->modulePath=$this->config->get('previousnextproduct_path');$this->moduleName=$this->config->get('previousnextproduct_name');$this->moduleModel=$this->config->get('previousnextproduct_model');$this->load->language($this->modulePath);$this->load->model($this->modulePath);}public function index(){$this->load->model('setting/store');$this->load->model('setting/setting');$this->document->setTitle($this->language->get('heading_title').' '.$this->version);$this->document->addStyle('view/stylesheet/previousnextproduct.css');$this->session->data['flash_error']=empty($this->session->data['flash_error'])?array():$this->session->data['flash_error'];$this->session->data['flash_success']=empty($this->session->data['flash_success'])?array():$this->session->data['flash_success'];$this->document->addStyle('view/stylesheet/previousnextproduct/font-awesome/css/font-awesome.css');$this->document->addStyle('view/stylesheet/previousnextproduct/previousnextproduct.css');$data['error_warning']='';if(!isset($this->request->get['store_id'])){$this->request->get['store_id']=0;}$store=$this->getCurrentStore($this->request->get['store_id']);if($this->request->server['REQUEST_METHOD']=='POST'){if(!$this->user->hasPermission('modify',$this->modulePath)){$this->session->data['flash_error'][]=$this->language->get('error_permission');$this->response->redirect($this->url->link('extension/module','token='.$this->session->data['token'],'SSL'));}if(!empty($_POST['OaXRyb1BhY2sgLSBDb21'])){$this->request->post['previousnextproduct']['LicensedOn']=$_POST['OaXRyb1BhY2sgLSBDb21'];}if(!empty($_POST['cHRpbWl6YXRpb24ef4fe'])){$this->request->post['previousnextproduct']['License']=json_decode(base64_decode($_POST['cHRpbWl6YXRpb24ef4fe']),true);}if(empty($_GET['activate'])){$this->validate();}$this->model_setting_setting->editSetting('previousnextproduct',$this->request->post);$this->session->data['flash_success'][]=$this->language->get('text_success');$this->session->data['success']=$this->language->get('text_success');if(!empty($_GET['activate'])){$this->session->data['flash_success'][]=$this->language->get('text_success_activation');}$selectedTab=(empty($this->request->post['selectedTab']))?0:$this->request->post['selectedTab'];$this->response->redirect($this->url->link($this->modulePath,'token='.$this->session->data['token'].'&tab='.$selectedTab,'SSL'));}$variables=array('text_enabled','text_disabled','text_content_top','text_content_bottom','text_column_left','text_column_right','text_activate','text_not_activated','text_click_activate','text_cache_delete_warning','text_display_images','entry_sort_by','entry_position','entry_design','entry_code','entry_code_help','entry_custom_css','button_save','button_cancel','value_default','value_price_asc','value_price_desc','value_name_asc','value_name_desc','value_rating_asc','value_rating_desc','value_model_asc','value_model_desc','value_position_left','value_position_center','value_position_right','value_design_standard','value_design_silver','value_design_nodesign',);foreach($variables as$variable)$data[$variable]=$this->language->get($variable);$data['heading_title']=$this->language->get('heading_title').' '.$this->version;$data['error_code']=isset($this->error['code'])?$this->error['code']:'';if(isset($this->session->data['success'])){$data['success']=$this->session->data['success'];unset($this->session->data['success']);}else{$data['success']='';}if(isset($this->error['warning'])){$data['error_warning']=$this->error['warning'];}else{$data['error_warning']='';}$data['breadcrumbs']=array(array('text'=>$this->language->get('text_home'),'href'=>$this->url->link('common/home','token='.$this->session->data['token'],'SSL'),'separator'=>false),array('text'=>$this->language->get('text_module'),'href'=>$this->url->link('extension/module','token='.$this->session->data['token'],'SSL'),'separator'=>' :: '),array('text'=>$this->language->get('heading_title'),'href'=>$this->url->link($this->modulePath,'token='.$this->session->data['token'],'SSL'),'separator'=>' :: '));$data['action']=$this->url->link($this->modulePath,'token='.$this->session->data['token'].'&type=module','SSL');$data['cancel']=$this->url->link('extension/module','token='.$this->session->data['token'].'&type=module','SSL');if(isset($this->request->post['previousnextproduct'])){foreach($this->request->post['previousnextproduct'] as$key=>$value){$data['data']['previousnextproduct'][$key]=$this->request->post['previousnextproduct'][$key];}}else{$configValue=$this->model_setting_setting->getSetting('previousnextproduct');$data['data']=$configValue;}$data['currenttemplate']=$this->config->get('config_template');$data['moduleData']=(isset($data['data']['previousnextproduct']))?$data['data']['previousnextproduct']:"";$this->load->model('design/layout');$data['layouts']=$this->model_design_layout->getLayouts();$data['stores']=array_merge(array(0=>array('store_id'=>'0','name'=>$this->config->get('config_name').' '.$data['value_default'],'url'=>HTTP_SERVER,'ssl'=>HTTPS_SERVER)),$this->model_setting_store->getStores());$data['store']=$store;$data['token']=$this->session->data['token'];$data['header']=$this->load->controller('common/header');$data['column_left']=$this->load->controller('common/column_left');$data['footer']=$this->load->controller('common/footer');$this->response->setOutput($this->load->view($this->modulePath,$data));}private function validate(){if(empty($this->request->post['previousnextproduct']['Enabled'])||$this->request->post['previousnextproduct']['Enabled']=='false')return;}private function getCatalogURL(){if(isset($_SERVER['HTTPS'])&&(($_SERVER['HTTPS']=='on')||($_SERVER['HTTPS']=='1'))){$storeURL=HTTPS_CATALOG;}else{$storeURL=HTTP_CATALOG;}return$storeURL;}private function getServerURL(){if(isset($_SERVER['HTTPS'])&&(($_SERVER['HTTPS']=='on')||($_SERVER['HTTPS']=='1'))){$storeURL=HTTPS_SERVER;}else{$storeURL=HTTP_SERVER;}return$storeURL;}private function getCurrentStore($store_id){if($store_id&&$store_id!=0){$store=$this->model_setting_store->getStore($store_id);}else{$store['store_id']=0;$store['name']=$this->config->get('config_name');$store['url']=$this->getCatalogURL();}return$store;}public function install(){$this->{$this->moduleModel}->install();}public function uninstall(){$this->load->model('setting/setting');$this->load->model('setting/store');$this->model_setting_setting->deleteSetting('previousnextproduct',0);$stores=$this->model_setting_store->getStores();foreach($stores as$store){$this->model_setting_setting->deleteSetting('previousnextproduct',$store['store_id']);}$this->{$this->moduleModel}->uninstall();}}; 